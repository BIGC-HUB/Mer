'use strict';var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){if(b.get||b.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var c=0;return $jscomp.iteratorPrototype(function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}})};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var c=a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};var log=function(){console.log.apply(console,arguments)},ckXian=function(){var a=document.querySelector("body"),c=!1;a.addEventListener("keydown",function(b){77===b.keyCode&&b.ctrlKey&&(c?(document.querySelector("#xm").remove(),c=!1):(a.insertAdjacentHTML("afterbegin",'\x3cstyle id\x3d"xm" media\x3d"screen"\x3e * {outline: 1px red dashed!important} \x3c/style\x3e'),c=!0))})}(),Ajax=function(a,c,b,d){void 0===d&&(d=!0);void 0===b&&(b=function(a){console.log(a)});var e=new XMLHttpRequest;e.open("POST",a,d);e.setRequestHeader("Content-Type","application/json");e.onreadystatechange=function(){4===e.readyState&&b(e.response)};c?(c=JSON.stringify(c),e.send(c)):e.send()},setCookie=function(a,c,b){var d=new Date;b?(d.setDate(d.getDate()+b),b=";expires\x3d"+d.toGMTString()):b="";document.cookie=a+"\x3d"+encodeURIComponent(c)+b},getCookie=function(a){for(var c=document.cookie.split("; "),c=$jscomp.makeIterator(c),b=c.next();!b.done;b=c.next())if(b=b.value.split("\x3d"),b[0]===a)return b[1]},__initTop=function(){$("#top").html('\x3ctop data-id\x3d"user" class\x3d"user"\x3e\x3ci class\x3d"iconfont icon-login fa-lg"\x3e\x3c/i\x3e\u767b\u5f55\x3c/top\x3e\x3ctop class\x3d"home"\x3e\x3c/top\x3e\x3ctop data-id\x3d"book" class\x3d"book"\x3e\x3ci class\x3d"iconfont icon-books fa-lg"\x3e\x3c/i\x3e\u4e66\u67b6\x3c/top\x3e')}(),__initMain=function(){$("#search").html('\x3clogo\x3e\x3c/logo\x3e\x3cdiv class\x3d"search"\x3e\x3cinput id\x3d"search-input" type\x3d"text" maxlength\x3d"70"\x3e\x3ca\x3e\x3ci class\x3d"fa-1x iconfont icon-xclear"\x3e\x3c/i\x3e\x3c/a\x3e\x3cbutton id\x3d"search-button"\x3e\x3ci class\x3d"fa-lg iconfont icon-search" aria-hidden\x3d"true"\x3e\x3c/i\x3e\x3c/button\x3e\x3c/div\x3e\x3cdiv class\x3d"more"\x3e\x3cul id\x3d"more-ul"\x3e\x3c/ul\x3e\x3cdiv id\x3d"more-i"\x3e\x3cbutton id\x3d"more-button"\x3e\x3ci class\x3d"transparent fa-1x iconfont icon-down" aria-hidden\x3d"true"\x3e\x3c/i\x3e\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e')}(),__initLogo=function(a){var c=User.engines[a.cls][a.key],b=$("#search-input")[0];c.icon?(c='\x3ci data-cls\x3d"'+a.cls+'" data-key\x3d"'+a.key+'" style\x3d"color:'+c.color+';" class\x3d"fa-5x iconfont icon-'+c.icon+'"\x3e\x3c/i\x3e',"\u5927\u6d77"!=a.key&&(b.placeholder=a.key)):(c='\x3cspan data-cls\x3d"'+a.cls+'" data-key\x3d"'+a.key+'" style\x3d"color:'+c.color+';"\x3e'+a.key+"\x3c/span\x3e",b.placeholder="");$("logo").html(c)},__initBookEngine=function(a){for(var c=$("#"+a),b,d=!0,e="",f=$jscomp.makeIterator(User.def.order[a]),g=f.next();!g.done;g=f.next())g=g.value,d&&(b=g,d=!1),e+='\x3ctag data-kind\x3d"'+a+'" data-cls\x3d"'+g+'"\x3e'+g+"\x3c/tag\x3e";d=Mer.showHtml(a,b);c.html('\n    \x3cdiv class\x3d"kind" data-kind\x3d"'+a+'" data-cls\x3d"'+b+'"\x3e'+e+'\x3c/div\x3e\n    \x3cdiv class\x3d"show" data-cls\x3d"'+b+'"  data-key\x3d"'+a+'"\x3e'+d+"\x3c/div\x3e")},__init__=function(a){__initLogo(a.def.logo);__initBookEngine("engine");__initBookEngine("book")},Mer={},User={};Mer.load=function(){Ajax("user/load",null,function(a){a=JSON.parse(a);User=a.user;Mer.dengl=a.login;__init__(User);$("body").click();$("#login .text").text(a.text);Mer.dengl&&Mer.login.show(a)})};Mer.save=function(){Mer.dengl&&Ajax("user/save",User)};$("#search").on("click","logo",function(){$("#search").hide();$("#engine").slideDown("slow")});$("#top").on("click",".home",function(){"none"===$("#search").css("display")&&($("#engine,#book,#login,#edit-cont").hide(),$("#search").animate({height:"show"}))});$("#top").on("click",".book",function(){"none"===$("#book").css("display")?($("#engine,#search,#login,#edit-cont").hide(),$("#book").animate({height:"show"})):$("top.home").click()});$("#top").on("click",".user",function(){"none"===$("#login").css("display")?($("#engine,#search,#book,#edit-cont").hide(),$("#login").animate({height:"show"})):$("top.home").click()});Mer.ai={isPC:function(){for(var a=navigator.userAgent,c=$jscomp.makeIterator("Android;iPhone;SymbianOS;Windows Phone;iPad;iPod".split(";")),b=c.next();!b.done;b=c.next())if(0<a.indexOf(b.value))return!1;return!0},moreHtml:"",now:-1,firstUp:!0,soGou:function(a){Mer.ai.now=-1;Mer.ai.firstUp=!0;a="https://www.sogou.com/suggnew/ajajjson?type\x3dweb\x26key\x3d"+encodeURI(a);window.sogou={sug:function(a){a=a[1];if(a.length){for(var b="",c=0;c<a.length;c++)b+='\x3cli data-id\x3d"'+c+'"\x3e'+a[c]+"\x3c/li\x3e";Mer.ai.moreHtml=b;$("#more-ul").html(Mer.ai.moreHtml);$("#more-ul").addClass("more-border");$("#search-input").addClass("more-radius")}else $("#more-ul").html(""),$("#more-ul").removeClass("more-border"),$("#search-input").removeClass("more-radius")}};$("#sug").html("\x3cscript src\x3d"+a+"\x3e\x3c/script\x3e")},UpDn:function(a){Mer.ai.firstUp&&-1===a&&(a=0,Mer.ai.firstUp=!1);var c=Mer.ai.now,b=$("#more-ul li");a=(c+a+b.length)%b.length;Mer.ai.now=a;event.target.value=b[a].innerText;$(b[a]).addClass("li-hover");$(b[c]).removeClass("li-hover")},hide:function(){$("#search-input ~ a").hide();$("#more-ul").html("");$("#more-ul").removeClass("more-border");$("#search-input").removeClass("more-radius")}};Mer.pc=Mer.ai.isPC();$("#search-input").on("blur",function(){768<screen.width&&($("#more-ul").html(""),$("#more-ul").removeClass("more-border"),$("#search-input").removeClass("more-radius"))});$("#search-input").on("focus",function(){$(".fa-mini").remove();$("#more-button i").addClass("transparent");Mer.ai.moreHtml&&event.target.value?($("#more-ul").html(Mer.ai.moreHtml),$("#more-ul").addClass("more-border"),$("#search-input").addClass("more-radius")):$("#more-ul").html("")});$("#search-input").on("keyup",function(){13===event.keyCode?$("#search-button").click():38===event.keyCode?Mer.ai.UpDn(-1):40===event.keyCode&&Mer.ai.UpDn(1)});$("#search-input").on("keydown",function(){38===event.keyCode&&event.preventDefault()});$("#more-ul").on("mouseover","li",function(){var a=Mer.ai.now,c=$("#more-ul li"),b=Number(event.target.dataset.id);Mer.ai.now=b;$(c[b]).addClass("li-hover");$(c[a]).removeClass("li-hover")});$("#search-input").on("input",function(){var a=event.target.value;a?(Mer.ai.soGou(a),$("#search-input ~ a").show()):Mer.ai.hide()});$("#search-input ~ a").on("click",function(){event.preventDefault();var a=$("#search-input")[0];a.value="";a.focus();Mer.ai.hide()});Mer.Search=function(a){var c=($("logo i")[0]||$("logo span")[0]).dataset,c=User.engines[c.cls][c.key],b=c.url;768>screen.width&&c.wap&&(b=c.wap);b+=encodeURI(a);window.open("http://"+b)};$("#more-ul").on("mousedown","li",function(){Mer.Search(event.target.innerText)});$("#search-button").on("click",function(){var a=$("#search-input")[0].value;a?Mer.Search(a):$("#search-input")[0].focus()});Mer.Mini=function(a,c){$(".fa-mini").remove();var b="",d="",e;for(e in a[c]){var f=a[c][e];f.icon&&"\u5927\u6d77"!=e&&(b+='\x3ci data-cls\x3d"'+c+'" data-key\x3d"'+e+'" class\x3d"fa-mini iconfont icon-'+f.icon+'"\x3e\x3c/i\x3e',d+=".icon-"+f.icon+":hover {color:"+f.color+"}")}$("#more-i").append(b);$("style").append(d)};Mer.Note=function(a){Mer.dengl?($("#more-ul").html('\x3ctextarea id\x3d"more-note"\x3e\x3c/textarea\x3e'),$("#more-note")[0].value=a):$("#more-ul").html("")};$("#more-ul").on("focus","#more-note",function(){$(".fa-mini").fadeOut(618)});$("#more-ul").on("blur","#more-note",function(){User.note=event.target.value;Mer.save()});$("#more-button").on("click",function(){$("#more-ul").removeClass("more-border");$("#search-input").removeClass("more-radius");Mer.Mini(User.engines,User.def.logo.cls);Mer.Note(User.note)});$("#more-button").on("mouseover",function(){$("#more-button i").removeClass("transparent")});$("#more-i").on("click",".fa-mini",function(){Mer.Engine()});Mer.Engine=function(){var a=event.target.dataset,c=User.engines[a.cls][a.key],b=$("#search-input")[0];c.icon?(c='\x3ci data-cls\x3d"'+a.cls+'" data-key\x3d"'+a.key+'" style\x3d"color:'+c.color+';" class\x3d"fa-5x iconfont icon-'+c.icon+'"\x3e\x3c/i\x3e',b.placeholder=a.key):(c='\x3cspan data-cls\x3d"'+a.cls+'" data-key\x3d"'+a.key+'" style\x3d"color:'+c.color+';"\x3e'+a.key+"\x3c/span\x3e",b.placeholder="");$("logo").html(c);b.focus()};$("#engine").on("click","tag",function(){Mer.tagClick("engine")});$("#engine").on("click","engine",function(){Mer.rest.short&&(Mer.Engine(),$("#engine").hide(),$("top.home").click())});Mer.showHtml=function(a,c){var b=User[a+"s"];c=c||event.target.innerText;var d="",e;for(e in b[c])var f=b[c][e],d=f.icon?d+("\x3c"+a+' data-cls\x3d"'+c+'" data-key\x3d"'+e+'"\x3e\x3ci style\x3d"color:'+f.color+'" class\x3d"fa-logo iconfont icon-'+f.icon+'"\x3e\x3c/i\x3e\x3c/'+a+"\x3e"):d+("\x3c"+a+' data-cls\x3d"'+c+'" data-key\x3d"'+e+'"\x3e\x3cspan style\x3d"color:'+f.color+'"\x3e'+e+"\x3c/span\x3e\x3c/"+a+"\x3e");return d};Mer.tagClick=function(a,c){if(Mer.rest.short){var b=Mer.showHtml(a),d=$("#"+a+" .show")[0];d.innerHTML=b;""===b?(d.style.height="10em",d.dataset.cls=c||event.target.innerText,d.dataset.kind=a):d.style.height="auto"}};$("#book").on("click","tag",function(){Mer.tagClick("book")});$("#book").on("click","book",function(){if(Mer.rest.short){var a=event.target.dataset;window.open("http://"+User.books[a.cls][a.key].url)}});var __initLogin=function(){$("#login").html('\x3cdiv style\x3d"color: rgba(207,216,230,0.1)" class\x3d"fa-5x iconfont icon-star"\x3e\x3c/div\x3e\x3cdiv class\x3d"text"\x3e\x3c/div\x3e\x3cdiv id\x3d"login-dengl"\x3e\x3cinputbox\x3e\x3ci class\x3d"iconfont icon-login"\x3e\x3c/i\x3e\x3cinput id\x3d"login-name" type\x3d"text" placeholder\x3d"\u540d\u5b57" maxlength\x3d"16"\x3e\x3ci class\x3d"transparent iconfont icon-xclear"\x3e\x3c/i\x3e\x3c/inputbox\x3e\x3cinputbox\x3e\x3ci class\x3d"iconfont icon-lock"\x3e\x3c/i\x3e\x3cinput id\x3d"login-key"  type\x3d"password" placeholder\x3d"\u5bc6\u7801" maxlength\x3d"30"\x3e\x3ci class\x3d"iconfont icon-biyan"\x3e\x3c/i\x3e\x3c/inputbox\x3e\x3c/div\x3e\x3cdiv id\x3d"login-zhuce"\x3e\x3cinputbox\x3e\x3ci class\x3d"iconfont icon-phone"\x3e\x3c/i\x3e\x3cinput id\x3d"login-phone" type\x3d"tel" maxlength\x3d"11" placeholder\x3d"\u624b\u673a"\x3e\x3cspan  id\x3d"login-phone-11"\x3e11\x3c/span\x3e\x3c/inputbox\x3e\x3cinputbox\x3e\x3ci class\x3d"iconfont icon-sms"\x3e\x3c/i\x3e\x3cinput id\x3d"login-sms" type\x3d"tel" maxlength\x3d"4" placeholder\x3d"\u9a8c\u8bc1\u7801"\x3e\x3cspan  id\x3d"login-sms-60"\x3e60\x3c/span\x3e\x3c/inputbox\x3e\x3c/div\x3e\x3cdiv id\x3d"login-information"\x3e\x3cinputbox class\x3d"name"\x3e\x3ci class\x3d"iconfont icon-login"\x3e\x3c/i\x3e\x3cinput type\x3d"text" maxlength\x3d"16"\x3e\x3ci class\x3d"iconfont icon-go"\x3e\x3c/i\x3e\x3c/inputbox\x3e\x3cinputbox class\x3d"phone"\x3e\x3ci class\x3d"iconfont icon-phone"\x3e\x3c/i\x3e\x3cinput type\x3d"tel" maxlength\x3d"11"\x3e\x3ci class\x3d"iconfont icon-go"\x3e\x3c/i\x3e\x3c/inputbox\x3e\x3cbutton class\x3d"enter btn btn-blue" type\x3d"button"\x3e\u8fdb\u5165\x3c/button\x3e\x3cinputbox class\x3d"key"\x3e\x3ci class\x3d"iconfont icon-sms"\x3e\x3c/i\x3e\x3cinput  type\x3d"password" maxlength\x3d"30"\x3e\x3ci class\x3d"iconfont icon-go"\x3e\x3c/i\x3e\x3c/inputbox\x3e\x3c/div\x3e\x3cdiv id\x3d"login-btn"\x3e\x3cbutton class\x3d"zhuce  btn btn-white" type\x3d"button"\x3e\u6ce8\u518c\x3c/button\x3e\x3cbutton class\x3d"dengl btn btn-blue"  type\x3d"button"\x3e\u767b\u5f55\x3c/button\x3e\x3c/div\x3e')}();Mer.login={hide:function(){$("#login-information").hide();$("#login-information input").val("");$("#login-btn, #login-dengl").animate({opacity:"show"});$(".fa-mini").remove();$("#more-ul").html("");Mer.dengl=!1},show:function(a){$("#login-btn, #login-dengl").hide();$("#login-information").animate({opacity:"show"});$("inputbox.phone input").val(a.phone);$("inputbox.name input").val(a.name);$("inputbox.key input").val(a.key);$(".fa-mini").remove();$("#more-ul").html("")}};$("#login input").on("focus",function(){event.target.parentElement.classList.add("theme")});$("#login input").on("blur",function(){event.target.parentElement.classList.remove("theme");for(var a="",c=$jscomp.makeIterator(event.target.value),b=c.next();!b.done;b=c.next())b=b.value,/\u3000/.test(b)||(a+=b);event.target.value=a});$("#login input").on("keydown",function(){/ |\u3000/.test(event.key)&&event.preventDefault()});$("#login-name").on("focus",function(){$("#login .text").text("\u540d\u5b57 | \u624b\u673a\u53f7")});$("#login-name").on("keyup",function(){13===event.keyCode&&$("#login-key").focus();event.target.value?$("#login-name ~ i").removeClass("transparent"):$("#login-name ~ i").addClass("transparent")});$("#login-name ~ i").on("click",function(){$("#login-name")[0].value="";$("#login-name ~ i").addClass("transparent");$("#login-name").focus()});$("#login-key").on("focus",function(){$("#login .text").text("\u8bf7\u8f93\u5165\u5bc6\u7801")});$("#login-key").on("keyup",function(){13===event.keyCode&&$("#login-btn .dengl").click()});$("#login-key ~ i").on("click",function(){var a=$(event.target),c=$("#login-key")[0];"text"===c.type?(c.type="password",a.removeClass("icon-zhengyan")):(c.type="text",a.addClass("icon-zhengyan"))});$("#login-phone").on("focus",function(){$("#login .text").text("\u6ce8\u518c\u624b\u673a\u53f7")});$("#login-phone").on("blur",function(){for(var a="",c=$jscomp.makeIterator(event.target.value),b=c.next();!b.done;b=c.next())b=b.value,/\d/.test(b)&&(a+=b);event.target.value=a;(a=11-a.length)?$("#login-phone-11").text(a):($("#login-phone-11").html('\x3ci class\x3d"sms iconfont icon-go"\x3e\x3c/i\x3e'),$("#login .text").text("\u70b9\u51fb\u53d1\u9001"))});$("#login-phone").on("input",function(){var a=11-$("#login-phone")[0].value.length;$("#login-phone-11").text(a)});$("#login-phone").on("keyup",function(){13===event.keyCode&&event.target.blur()});$("#login-sms").on("focus",function(){$("#login .text").text("\u77ed\u4fe1\u9a8c\u8bc1\u7801")});$("#login-sms").on("blur",function(){for(var a="",c=$jscomp.makeIterator(event.target.value),b=c.next();!b.done;b=c.next())b=b.value,/\d/.test(b)&&(a+=b);event.target.value=a});$("#login-btn .dengl").on("click",function(){var a=function(){var a=$("#login-name").val(),b=$("#login-key").val();setCookie("name",a,7);setCookie("key",b,7);Ajax("user/login",null,function(a){a=JSON.parse(a);$("#login .text").text(a.text);a.login&&(User=a.user,Mer.dengl=a.login,__init__(User),Mer.login.show(a))})};"none"===$("#login-dengl").css("display")?($("#login-zhuce").hide(),$("#login-dengl").animate({height:"show"}),$("#login .text").text("\u8bf7\u8f93\u5165\u540d\u5b57")):""===$("#login-name").val()?$("#login-name").focus():""===$("#login-key").val()?$("#login-key").focus():a()});$("#login-btn .zhuce").on("click",function(){var a=function(){var a=$("#login-phone").val(),b=$("#login-sms").val();Ajax("user/join",{phone:a,sms:b},function(b){b=JSON.parse(b);b.join?($("#login-sms").val(""),$("#login-phone").val(""),Mer.edit.at=a,$("#edit-val").html('\x3cdiv\x3e\x3cspan\x3e\u540d\u3000\u5b57\x3c/span\x3e\x3cinput class\x3d"name" placeholder\x3d"\u2026"\x3e\x3c/div\x3e'),$("#edit-btn").html('\x3cbutton data-btn\x3d"name" class\x3d"yes btn btn-blue"\x3e\x3cdiv class\x3d"fa-2x iconfont icon-yes"\x3e\x3c/div\x3e\u786e\u8ba4\x3c/button\x3e'),$("#edit .text").text(b.text),$("#edit-cont").animate({height:"show"})):$("#login .text").text(b.text)})};"none"===$("#login-zhuce").css("display")?($("#login-dengl").hide(),$("#login-zhuce").animate({height:"show"}),$("#login .text").text("\u8bf7\u8f93\u5165\u624b\u673a | \u53d1\u9001\u9a8c\u8bc1\u7801")):11===$("#login-phone").val().length?4===$("#login-sms").val().length?a():$("#login-sms").focus():$("#login-phone").focus()});$("#login-phone-11").on("click",".sms",function(){var a=$("#login-phone"),c=$("#login-phone-11"),b=$("#login-sms-60");Ajax("user/join-sms",{phone:a.val()},function(d){d=JSON.parse(d);$("#login .text").text(d.text);if(d.send){c.html('\x3ci class\x3d"iconfont icon-more"\x3e\x3c/i\x3e');a.off("blur");a.attr("readonly","readonly");var e=60,f=setInterval(function(){--e;b.text(e);0==e&&(b.text(60),clearInterval(f),a.removeAttr("readonly"),a.on("blur",function(){for(var a="",b=$jscomp.makeIterator(event.target.value),d=b.next();!d.done;d=b.next())d=d.value,/\d/.test(d)&&(a+=d);event.target.value=a;(a=11-a.length)?c.text(a):(c.html('\x3ci class\x3d"sms iconfont icon-go"\x3e\x3c/i\x3e'),$("#login .text").text("\u77ed\u4fe1\u9a8c\u8bc1\u7801"))}))},1E3)}})});$("#login-information .enter").on("click",function(){Mer.Note(User.note);$("#more-button i").removeClass("transparent");$("top.home").click()});var __initEdit=function(){$("#edit").html('\x3cdiv id\x3d"edit-full"\x3e\x3c/div\x3e\x3cul id\x3d"edit-ul"\x3e\x3c/ul\x3e\x3cdiv id\x3d"edit-cont"\x3e\x3cdiv class\x3d"tan"\x3e\x3cdiv class\x3d"text"\x3e\x3c/div\x3e\x3cdiv id\x3d"edit-val"\x3e\x3c/div\x3e\x3cdiv id\x3d"edit-btn"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e')}();Mer.edit={init:function(a,c){var b={};b.cls=a.dataset.cls;b.key=a.dataset.key;b.tag=a.dataset.kind||a.localName;"show"===a.className&&(b.tag=a.dataset.key);b.kind=b.tag+"s";b.label="\u5f15\u64ce";a='\x3cdiv\x3e\x3cspan\x3e\u540d\u3000\u5b57\x3c/span\x3e\x3cinput class\x3d"name" placeholder\x3d"\u2026"\x3e\x3c/div\x3e\x3cdiv\x3e\x3cspan\x3e\u7f51\u3000\u5740\x3c/span\x3e\x3ctextarea spellcheck\x3d"false" class\x3d"url" rows\x3d"1" placeholder\x3d"\u2026"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv class\x3d"half"\x3e\x3cspan\x3e\u989c\u3000\u8272\x3c/span\x3e\x3cinput class\x3d"color" placeholder\x3d"\u2026"\x3e\x3c/div\x3e\x3cdiv class\x3d"half"\x3e\x3cspan\x3e\u56fe\u3000\u6807\x3c/span\x3e\x3cinput class\x3d"icon" placeholder\x3d"\u2026"\x3e\x3c/div\x3e\x3cdiv\x3e\x3cspan\x3e\u79fb\u52a8\u7aef\x3c/span\x3e\x3ctextarea spellcheck\x3d"false" class\x3d"wap" rows\x3d"1" placeholder\x3d"\u2026"\x3e\x3c/textarea\x3e\x3c/div\x3e';var d='\x3cbutton class\x3d"yes btn btn-blue"\x3e\x3cdiv class\x3d"fa-2x iconfont icon-yes"\x3e\x3c/div\x3e\u786e\u8ba4\x3c/button\x3e\x3cbutton class\x3d"no  btn btn-white"\x3e\x3cdiv class\x3d"fa-2x iconfont icon-no"\x3e\x3c/div\x3e\u53d6\u6d88\x3c/button\x3e';b.key?"book"===b.tag&&(a='\x3cdiv\x3e\x3cspan\x3e\u540d\u3000\u5b57\x3c/span\x3e\x3cinput class\x3d"name" placeholder\x3d"\u2026"\x3e\x3c/div\x3e\x3cdiv\x3e\x3cspan\x3e\u7f51\u3000\u5740\x3c/span\x3e\x3ctextarea spellcheck\x3d"false" class\x3d"url" rows\x3d"1" placeholder\x3d"\u2026"\x3e\x3c/textarea\x3e\x3c/div\x3e\x3cdiv\x3e\x3cspan\x3e\u989c\u3000\u8272\x3c/span\x3e\x3cinput class\x3d"color" placeholder\x3d"\u2026"\x3e\x3c/div\x3e',b.label="\u4e66\u7b7e"):(a='\x3cdiv\x3e\x3cspan\x3e\u540d\u3000\u5b57\x3c/span\x3e\x3cinput class\x3d"name" placeholder\x3d"\u2026"\x3e\x3c/div\x3e',b.label="\u5206\u7ec4");c&&(d+='\x3cbutton class\x3d"del btn btn-red"\x3e\x3cdiv class\x3d"fa-2x iconfont icon-del"\x3e\x3c/div\x3e\u5220\u9664\x3c/button\x3e');$("#edit-val").html(a);$("#edit-btn").html(d);$("#edit-cont").animate({height:"show"});return b},show:function(a){var c=Mer.edit.at=event.target;if(a){$("#edit-ul").html(a);a=event.clientX-80;var b=event.clientY;160>window.document.body.offsetWidth-a?a=window.document.body.offsetWidth-165:0>a&&(a=5);$(c).addClass("edit-hover");$("#edit-ul, #edit-full").show();$("#edit-ul").css({top:b+"px",left:a+"px"});setTimeout(function(){$("body").one("click",function(){event.target.classList.contains("edit")?(Mer.edit.hide(c),Mer.edit[event.target.dataset.btn](c)):Mer.edit.hide(c)})},100)}else $("top.home").click()},hide:function(a){$(a).removeClass("edit-hover");$("#edit-ul, #edit-full").hide()},at:{},new:function(a){a=Mer.edit.init(a);$("#edit .text").text("\u6dfb\u52a0\u00b7"+a.label);$("#edit-btn .yes")[0].dataset.btn="new"},amend:function(a){a=Mer.edit.init(a,!0);var c="\u7f16\u8f91\u00b7";if(a.key){var b=User[a.kind][a.cls][a.key];"engine"===a.tag&&(a.key===User.def.logo.key&&a.cls===User.def.logo.cls&&$("#edit-btn .del").hide(),$("#edit-val .wap").val(b.wap),$("#edit-val .icon").val(b.icon));$("#edit-val .color").val(b.color);$("#edit-val .color")[0].style.color=b.color;$("#edit-val .url").val(b.url);$("#edit-val .name").val(a.key)}else c="\u91cd\u547d\u540d\u00b7",$("#edit-cont .name").val(a.cls);$("#edit .text").text(c+a.label);$("#edit-btn .yes")[0].dataset.btn="amend"},move:function(a){a=Mer.edit.init(a);$("#edit .text").text("\u79fb\u52a8\u00b7\u5206\u7ec4");var c="";a=$jscomp.makeIterator(User.def.order[a.tag]);for(var b=a.next();!b.done;b=a.next())c+="\x3ctag\x3e"+b.value+"\x3c/tag\x3e";$("#edit-val").html(c);$("#edit-btn .yes")[0].dataset.btn="move";$("#edit-btn .yes")[0].dataset.move=""},copy:function(a){a.select();document.execCommand("Copy")},select:function(a){a.select()},change:function(a){log("\u4fee\u6539",a.className)},exit:function(){setCookie("name","",0);setCookie("key","",0);Mer.load();Mer.login.hide()}};Mer.send={tag:$(),del:function(a){var c=a.dataset.kind||a.localName,b=a.dataset.cls,d=a.dataset.key,e=c+"s";if(d)delete User[e][b][d],a.remove(),a=$("#"+c+" .show")[0],0===Object.keys(User[e][b]).length?(a.style.height="10em",a.dataset.cls=b,a.dataset.kind=c):a.style.height="auto",$("#edit-btn .no").click(),e=$("logo i,logo span").data(),e.cls===b&&e.key===d&&__initLogo(User.def.logo),Mer.save();else if(Object.keys(User[e][b]).length)$("#edit .text").html("\u63d0\u793a\uff1a\u7c7b\u4e0d\u4e3a\u7a7a");else if(1===Object.keys(User[e]).length)$("#edit .text").html("\u63d0\u793a\uff1aLivSyrup");else{d=User.def.order[c];for(c=0;c<d.length;c++)b===d[c]&&d.splice(c,1);delete User[e][b];a.remove();$("#edit-btn .no").click();Mer.save()}},new:function(a){var c=a.dataset.cls,b=a.dataset.kind||a.localName,d=a.dataset.key;"show"===a.className&&(b=a.dataset.key);var e=b+"s",f=$("#edit-val .name").val(),g=$("#edit-val .url").val();f?d?g?(d={},"engine"===b?(d.icon=$("#edit-val .icon").val(),d.color=$("#edit-val .color").val(),d.wap=$("#edit-val .wap").val()):d.color=$("#edit-val .color").val(),d.url=$("#edit-val .url").val(),log(),(g=(new Set(Object.keys(User[e][c]))).has(f))?($("#edit .text").text("\u540d\u5b57\u4e0d\u80fd\u91cd\u590d"),$("#edit-cont .name").focus()):(User[e][c][f]=d,"div"!==a.localName&&(a=a.parentElement),$(a).html(Mer.showHtml(b,c)),$("#edit-btn .no").click(),Mer.save())):($("#edit .text").text("\u7f51\u5740\u4e0d\u80fd\u4e3a\u7a7a"),$("#edit-val .url").focus()):(g=(new Set(Object.keys(User[e]))).has(f))?($("#edit .text").text("\u540d\u5b57\u4e0d\u80fd\u91cd\u590d"),$("#edit-cont .name").focus()):(User[e][f]={},"div"!==a.localName&&(a=a.parentElement),$(a).append('\x3ctag data-kind\x3d"'+b+'" data-cls\x3d"'+f+'"\x3e'+f+"\x3c/tag\x3e"),Mer.tagClick(b,f),$("#edit-btn .no").click(),User.def.order[b].push(f),Mer.save()):($("#edit .text").text("\u540d\u5b57\u4e0d\u80fd\u4e3a\u7a7a"),$("#edit-val .name").focus())},amend:function(a){var c=a.dataset.kind||a.localName,b=a.dataset.key,d=a.dataset.cls,e=c+"s",f=$("#edit-cont .name").val(),g=$("#edit-val .url").val();if(f)if(b)if(g){g={};"engine"===c?(g.icon=$("#edit-val .icon").val(),g.color=$("#edit-val .color").val(),g.wap=$("#edit-val .wap").val()):g.color=$("#edit-val .color").val();g.url=$("#edit-val .url").val();var h=(new Set(Object.keys(User[e][d]))).has(f);h?b==f?(User[e][d][f]=g,$(a.parentElement).html(Mer.showHtml(c,d)),$("#edit-btn .no").click(),Mer.save()):($("#edit .text").text("\u540d\u5b57\u4e0d\u80fd\u91cd\u590d"),$("#edit-cont .name").focus()):(User[e][d][f]=JSON.parse(JSON.stringify(User[e][d][b])),delete User[e][d][b],$(a.parentElement).html(Mer.showHtml(c,d)),$("#edit-btn .no").click(),b===User.def.logo.key&&d===User.def.logo.cls&&(User.def.logo.key=f),a=$("logo i,logo span").data(),a.cls===d&&a.key===b&&__initLogo({key:f,cls:d}),Mer.save())}else $("#edit .text").text("\u7f51\u5740\u4e0d\u80fd\u4e3a\u7a7a"),$("#edit-val .url").focus();else if(h=(new Set(Object.keys(User[e]))).has(f))$("#edit .text").text("\u540d\u5b57\u4e0d\u80fd\u91cd\u590d"),$("#edit-cont .name").focus();else{User[e][f]=JSON.parse(JSON.stringify(User[e][d]));delete User[e][d];a.innerText=f;a.dataset.cls=f;a.click();$("#edit-btn .no").click();d===User.def.logo.cls&&(User.def.logo.cls=f);b=User.def.order[c];for(g=0;g<b.length;g++)b[g]===d&&b.splice(g,1,f);Mer.save()}else $("#edit .text").text("\u540d\u5b57\u4e0d\u80fd\u4e3a\u7a7a"),$("#edit-cont .name").focus()},move:function(a){var c=a.dataset.key,b=a.dataset.cls,d=(a.dataset.kind||a.localName)+"s",e=event.target.dataset.move;""===e?$("#edit .text").text("\u9009\u62e9\u00b7\u5206\u7ec4"):e===b?$("#edit-btn .no").click():(b===User.def.logo.cls&&c===User.def.logo.key&&(User.def.logo.cls=e),User[d][e][c]=JSON.parse(JSON.stringify(User[d][b][c])),delete User[d][b][c],a.remove(),$("#edit-btn .no").click(),a=$("logo i,logo span").data(),a.cls===b&&a.key===c&&__initLogo({key:c,cls:e}),Mer.save())},name:function(a){var c=$("#edit-val .name").val();c&&Ajax("/user/join-name",{name:c,phone:a},function(b){b=JSON.parse(b);b.add?($("#edit-cont").animate({height:"hide"}),$("#login-zhuce").hide(),$("#login-dengl").animate({height:"show"}),$("#login .text").text("\u8bf7\u767b\u5f55\uff0c\u521d\u59cb\u5bc6\u7801\uff1a"+a.slice(-4)),$("#login-key").val(a.slice(-4))):$("#edit .text").text(b.text)})}};Mer.rest={time:0,short:!0,tag:function(a,c){c=$jscomp.makeIterator(c);for(var b=c.next();!b.done;b=c.next())if(b.value===a.localName)return!0;return!1},cls:function(a,c){c=$jscomp.makeIterator(c);for(var b=c.next();!b.done;b=c.next())if(a.classList.contains(b.value))return!0;return!1},html:function(a){var c="";Mer.rest.tag(a,["book","engine"])?c='\x3cli data-btn\x3d"new"   class\x3d"edit"\x3e\x3cspan\x3e\u6dfb\u52a0\x3c/span\x3e\x3c/li\x3e\x3cli data-btn\x3d"amend" class\x3d"edit"\x3e\x3cspan\x3e\u7f16\u8f91\x3c/span\x3e\x3c/li\x3e\x3cli data-btn\x3d"move"  class\x3d"edit"\x3e\x3cspan\x3e\u79fb\u52a8\x3c/span\x3e\x3c/li\x3e':Mer.rest.tag(a,["tag"])?c='\x3cli data-btn\x3d"new"   class\x3d"edit"\x3e\x3cspan\x3e\u6dfb\u52a0\x3c/span\x3e\x3c/li\x3e\x3cli data-btn\x3d"amend" class\x3d"edit"\x3e\x3cspan\x3e\u91cd\u547d\u540d\x3c/span\x3e\x3c/li\x3e':Mer.rest.cls(a,["show","kind"])?c='\x3cli data-btn\x3d"new"   class\x3d"edit"\x3e\x3cspan\x3e\u6dfb\u52a0\x3c/span\x3e\x3c/li\x3e':Mer.rest.tag(a,["textarea","input"])?c='\x3cli data-btn\x3d"copy"  class\x3d"edit"\x3e\x3cspan\x3e\u590d\u5236\x3c/span\x3e\x3c/li\x3e\x3cli data-btn\x3d"select" class\x3d"edit"\x3e\x3cspan\x3e\u5168\u9009\x3c/span\x3e\x3c/li\x3e':Mer.rest.cls(a,["name","phone","key"])&&(c='\x3cli data-btn\x3d"change"  class\x3d"edit"\x3e\x3cspan\x3e\u4fee\u6539\x3c/span\x3e\x3c/li\x3e\x3cli data-btn\x3d"exit" class\x3d"edit"\x3e\x3cspan\x3e\u9000\u51fa\u767b\u5f55\x3c/span\x3e\x3c/li\x3e');return c}};$("body").on("touchstart",function(){Mer.rest.time=parseInt(event.timeStamp)});$("body").on("touchend",function(){300>parseInt(event.timeStamp)-Mer.rest.time?Mer.rest.short=!0:Mer.rest.short=!1});$("#edit-full").on("click",function(){$(event.target).hide()});$("body").on("click",function(){document.oncontextmenu=function(){var a=event.target;if(Mer.rest.tag(a,["textarea","input"])&&!Mer.pc)return!0;Mer.dengl&&Mer.edit.show(Mer.rest.html(a));return!1};var a=event.target;Mer.rest.short||Mer.rest.tag(a,["textarea","input"])||Mer.dengl&&Mer.edit.show(Mer.rest.html(a))});$("#edit-val").on("blur",".icon",function(){event.target.value=event.target.value.toLowerCase()});$("#edit-val").on("blur",".color",function(){var a=event.target.value.toUpperCase();"#"===a.slice(0,1)&&(event.target.value=a);event.target.style.color=event.target.value});$("#edit-val").on("blur","input",function(){for(var a="",c=$jscomp.makeIterator(event.target.value),b=c.next();!b.done;b=c.next())b=b.value,/ /.test(b)||(a+=b);event.target.value=a});$("#edit-val").on("blur","textarea",function(){event.target.rows=1;for(var a="",c=$jscomp.makeIterator(event.target.value),b=c.next();!b.done;b=c.next())b=b.value,/ /.test(b)||(a+=b);"http"===a.slice(0,4)&&(event.target.value=a.slice(7),"s"===a.slice(4,5)&&(event.target.value=a.slice(8)))});$("#edit-val").on("input","textarea",function(){var a=event.target;a.value=a.value.replace(/\n| /g,"");a.rows=a.value?parseInt(a.scrollHeight/a.dataset.dif):1});$("#edit-val").on("focus","textarea",function(){var a=event.target,c=a.scrollHeight;a.value+="\n";var c=a.scrollHeight-c,b=a.value.split("");b.splice(-1,1);a.value=b.join("");a.rows=parseInt(a.scrollHeight/c);a.dataset.dif=c;a.select()});$("#edit-val").on("click","tag",function(){Mer.send.tag.remove("edit-hover");Mer.send.tag=event.target.classList;Mer.send.tag.add("edit-hover");$("#edit .text").text(event.target.innerText+"\u00b7\u5206\u7ec4");$("#edit-btn .yes")[0].dataset.move=event.target.innerText});$("#edit-btn").on("click",".yes",function(){Mer.send[event.target.dataset.btn](Mer.edit.at)});$("#edit-btn").on("click",".no",function(){$("#edit-cont").animate({height:"hide"})});$("#edit-btn").on("click",".del",function(){Mer.send.del(Mer.edit.at)});